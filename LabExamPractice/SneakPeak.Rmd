---
title: "36-315 Lab Exam Early Release, Fall 2019"
author: "Your Name Here"
output: 
  html_document:
    toc:  true
    toc_float:  true
    code_folding:  show
---

## Lab Exam Early Release

**Be aware that this is an early release. The actual lab exam will (possibly) contain a subset of these questions with (many) further sub-questions.**

#  Instructions:  Lab Exam

+  For all lab exam questions, be sure to answer the question(s) asked.
+  In addition to answering the questions, **write 1-3 sentences describing why you made certain choices in your graphic.**  For example, why did you choose a histogram vs. density plot?  Pie chart vs. rose diagram vs. bar chart vs. spine chart?  Stacked vs. side-by-side bar chart?  Why did you choose the bin width / number of bins in your histogram?  Why did you choose the bandwidth and kernel that you picked in your density plot?  Why did you decide to arrange the graphs the way you did (e.g. in a grid, horizontally, vertically).  Etc.
+  Remember, whenever you can supplement your answer with information from a statistical test, this is very beneficial!  Feel free to run statistical tests and include this information as part of your answer.


###  For all problems below, you should justify your answer with a single graph.

Using `facet_wrap()` or `facet_grid()` counts as one graph, while using `grid.arrange()` does not.

***
***

#  Data:  Tennis Tournaments!

For this assignment we will use **two** datasets on tennis tournaments from the Association of Tennis Professionals (ATP). They can be found [here for the ATP Data](https://raw.githubusercontent.com/mateyneykov/315_code_data/master/data/ATP%20Data.csv) and [here for the ATP Player Data](https://raw.githubusercontent.com/mateyneykov/315_code_data/master/data/ATP%20Player%20Data.csv). Both datasets contain identical information but are organized differently. The latter dataset is derived from the first one via transformations. You might find one or the other more 
useful to answer some of the problems, so be sure to understand the structure of both datasets. Descriptions of the two datasets can be found [here for the ATP Data](https://raw.githubusercontent.com/mateyneykov/315_code_data/master/data/ATP_Data_Readme.txt) and [here for the ATP Player Data](https://raw.githubusercontent.com/mateyneykov/315_code_data/master/data/ATP_Player_Data_Readme.txt) correspondingly. 

The data was originally taken from Kaggle and is the ATP Men's Tour competitions since 2000. [More information is available here](https://www.kaggle.com/jordangoblet/atp-tour-20002016/data). Keep in mind that the dataset has been modified to serve the purposes of our class!


<div style="width:600px">
![](http://www.tenniscanada.com/wp-content/uploads/2016/08/us-open-tennis-2016-packages.jpg)
</div>


***
***


#  Problem 1

**When the Leaves Fall**
  
*This problem and others require you to have access to variables that capture the year, month, and/or day (1-30) of the event. In creating these new variables (for possibly both datasets) you might find useful to recall how the functions `as.Date` and `format` work. Also possibly the library `lubridate`. Additionally the built in `month.abb` or `month.name` might be things to explore.*

Characterize the distribution of the total number of games played across a year (by Month). Describe any interesting features you see. Remove *NA*s if necessary, but be sure to justify.

***
***


#  Problem 2

**Let's Make A Bet**

*Background (Please read before you proceed): Betting return of a tennis player is a number (>= 1) which upon multiplication by the amount of the gambler's bet yields the return value in case that the gambler has placed a winning bet. In that way the gambler always "loses" his bet, but can potentially win if he has placed a winning bet. The amount of money that are pure win equals to (the betting return - 1) times his original bet. The betting returns are related to, but are **distinct** from the statistical odds of someone winning (one would expect that the higher the statistical ratio of one player winning is, the lower his betting return would be).*

Describe the marginal distribution of betting return from CentreBet *(CentreBet is a popular sports betting website)* for all players. This variable starts with `CB`. Discard all matches with missing data, and perform any variable transformations which would lead to better visualization of the distribution. Describe all interesting features of the distribution that you can identify. 

***
***


#  Problem 3

**Jacqueline's hypothesis: ATP Points Over Generations**

*Add a variable `Numerical_Date` which equals the $y + \frac{m}{12} + \frac{d}{365}$, where $y$ is the year, $m$ is the numerical month and $d$ is the day of the tournament. Use the newly created variable `Numerical_Date` to indicate the tournament time throughout this problem.*

Hint: You might find useful to recall how the functions `as.Date` and `format` work. Also possibly the library `lubridate`.

Your tennis fanatic friend Jacqueline hypothesizes that over time ATP has gotten better at ranking players and therefore we should see a linear increase in the *average trend* of winning players ATP entry points over time. So,... is she right? In addition to the trend give general comments on the distribution of ATP points over the years. **Exclude any observations with missing values from the plot.**

***
***

# Problem 4

**Rafael Nadal**

*For this problem discard the "Carpet" surface from consideration and focus only on the "Clay", "Grass" and "Hard" surfaces.*

Is the fact whether Rafael Nadal wins or loses independent of the surface of the court?

***
***

#  Problem 5

**Roger Federer**

*Create a variable `Year` which equals the year of the tournament. Use `Year` to measure time for the remainder of this problem.*

Characterize the marginal distribution of the **number** of wins of Roger Federer per calendar `Year`.  Are there any time periods with increases or decreases in the **proportion** of wins?

***
***


# Problem 6

**The Final**

Characterize the success rate of Roger Federer, Novak Djokovic and Rafael Nadal on tournament finals (see `Round`). Which one has the greatest success on the finals?

***
***

# Problem 7

**ATP Points**  

Characterize the distribution of the log of Winner's ATP points.

***
***

