---
title: "36-315 Homework 01, Spring 2019"
author: "Jingyuan Xing"
date: "Due Wednesday, September 4 (11:00pm ET) on Canvas"
output:
  html_document:
    toc:  true
    toc_float:  true
    code_folding:  show
---

```{r}
library(tidyverse)
```

## Introduction to `R`, RStudio, Data Types, and Critiquing Graphics

***
***

# Problem 1

(12 points)

**In your answer to this problem**, describe your chosen Pane Layout and give a
brief explanation for why you chose this.

Here is my pane layout:

+ Source in its own pane on the top-left-hand side
+ Console in its own pane on the bottom-left-hand side
+ Help in its own pane on the bottom-right-hand
+ Everything else on the bottom-right

Sources is in its own pane on the top left, because I need a large enough space 
to code. Console in its own pane on the bottom left, because running the code 
and commands right below the code itself makes me comfortable, and it is clear 
to see the result. Help is given an individual space, because it is important
and this makes it convinent to look things up. Everything else can be just put
in the top right.

**Where is my output file?**

The html file is in the same directory as the Rmd file.

**Additional Customization Advice** (not required):

done.


***
***

# Problem 2

(20 points)

**Critiquing Graphs**:

a. (5 points) **Include the graph in your assignment**. 

+ The graph is attached below

b. (5 points) **Describe the graph**. 

+ What does the graph show? The graph provides a visualization of individual articles published by each news sources over one day. It shows the average article sentence sentiment. 'Sentiment' roughly refers to "how strongly positive or negative the words are within a piece of text", as described in the article. 
  
+ What variables are plotted on the axes, via color, or via other features of the graph? Each news sources is represented by a unique color on the graph, and sentiments are measured using a
scale from -1 to 1 (the TextBlob's natural language processing sentiment model).   
  
+ What is the main result of the graph? The main result of the graph is to show which news sources uses more neutral sentiment (such as Wall Street Journal), and which news sources tend to use 
more 'polar' parts of the linguistic spectrum (such as CNN).

c. (5 points) **Critique the graph**.

+ Does the graph do a good job of achieving its goals? The graph has achieved its goal of showing how much each news sources has used emotional words.
  
+ Does the graph use an unnecessary amount of data ink? The graph does used an unnecessary amount of data ink.
  
+ Does the graph distort the actual effect/data/relationship? Yes, the graph has distorted the actaual data in the way that some dots are squished together and are overlapping, so the visual isn't showing the exact quantatitive amount.
  
+ What are the strengths and weaknesses (if any) of the graphic? The strength of this graph is that, it is very pretty. It is visually pleasant to look at. The weakness of the graphics is that, it doesn't convey the information clearly enough.  
  
+ What would you change (if anything) about this graphic? I would use histogram instead.

d. (5 points) **Critique the caption and/or surrounding text**. 

+ Does the text enhance the user's understanding of the graphic? Yes, labelling each flower petal on the graph with the name of each news sources does help the readers understanding the graphic a lot. Also, labelling "positive" and "negative", instead of only using "-1, 0, and 1", helps my understanding as well.
  
+ What else would you include in the caption/surrounding text to help the viewer understand the graphic? I would at least include the title of the graph.


<div style = "width:500px">
![](https://miro.medium.com/max/900/1*XEokWrnIYrEDArXXmE3RMg.png)
</div>

***
***

# Problem 3

(35 points)

**Introduction to ggplot2**: 

a. (1 point) 

Yes, ggplot2 is installed on my computer.

b. (1 point) What does the "gg" in `ggplot2` stand for?

The Grammar of Graphics.

c. (1 point) Who are the authors of the `ggplot2` package? Who is the maintainer of the `ggplot2` package? Search this person's name on the internet. What are some other `R` packages this person has written? 

The authors: Hadley Wickham, Winston Chang, Lionel Henry, Thomas Lin Pedersen, Kohske Takahashi, Claus Wilke, Kara Woo, Hiroaki Yutani, and RStudio.  
  
The maintainer: Hadley Wickham.  
  
Other R packages he has written: dplyr, tidyr, stringr, and lubridate.

d. (2 points) **1644: Toledo to Rome**


<div style = "width:500px">
![](https://raw.githubusercontent.com/mateyneykov/315_code_data/master/images/Fig-1-Langrens-1644-graph-of-determinations-of-the-distance-in-longitude-from-Toledo.png)
</div>

What are the dimensions of this dataset? (hint: you may find the functions `dim`, `nrow`, `ncol` useful) What are the names of the columns? (use the function `colnames` or `names`)

```{r, warning = FALSE, message = FALSE}
library(tidyverse)
library(HistData)
library(forcats) # you will need to install this package first


data(Langren1644)
# Correction of a misspelling of "Italy " to "Italy" in the Langren1644 data.
# The code collapses the two levels "Italy" and "Italy " of the factor variable
Langren1644 <- Langren1644 %>% mutate(Country = fct_recode(Country,
                                                           "Italy" = "Italy "))

```

```{r}
# Find the dimensions
dim(Langren1644)
nrow(Langren1644)
ncol(Langren1644)
```
The Langren1644 dataset has 12 rows and 9 columns.

```{r}
# Names of the columns
colnames(Langren1644)
```
The column names of the Langren1644 dataset are "Name", "Longitude", "Year", "Longname", "City", "Country", "Latitude", "Source", and "Gap".

e. (30 points) Code is provided below to create some graphs in ggplot2 with the `Langren1644` dataset. Study the code carefully, then answer the questions below. It is also recommended to study the lab code in detail before you attempt this problem. 

```{r}
# First graph
ggplot(Langren1644, aes(x = Country)) +
  geom_bar(fill = "lightblue") +
  labs(title = "Number of Observations made in Each Country",
       x = "Country",
       y = "Count",
       caption = "Sources: Langren 1644 Toledo to Rome")
```

```{r}
# Second graph
ggplot(data = Langren1644, aes(x = Longitude, y = Year)) + 
  geom_point(aes(color = Country))
```
  
The x-axis is "Longitude", which means the estimated value of the distance of cities between Toledo and Rome. The y-axis is "Latitude", which means the latitude of this city that we are interested in.
  
```{r}
# Third graph
# update this code with changes you made in the second graph as well
ggplot(data = Langren1644, aes(x = Longitude, y = Year)) + 
  geom_point(aes(color = Country, shape = Source)) +
  geom_vline(aes(xintercept = 16.53))
```

```{r}
# Fourth graphic
# update this code with changes you made in the third graphic
ggplot(data = Langren1644, aes(x = Longitude, y = Year)) + 
  geom_point(aes(color = Country, shape = Source)) + 
  geom_vline(aes(xintercept = 16.53)) + 
  geom_text(aes(label = Name), hjust = -0.05, 
    vjust = -0.05, angle = -90) +
  labs(title = "Year of Eetermination vs. Estimated Longitude between Toledo and Rome",
       subtitle = "Color coded by country, Shape coded by source")

```


+ (5 points) In the first graph, update the graphic by using light blue (`"lightblue"`) to color the bars, and add an appropriate title, and (if you want) add a caption specifying the source of the data (use the approach in Lab 01 to do this).


+ (10 points) In the second graph we observe a scatter plot of Longitude vs Latitude. Use `help(Langren1644)` to read about the variables in the `Langren1644` data, and briefly describe the axis of the plot. Next we will modify the plot. First, replace the variable `Latitude` with `Year`. In order to get more information to the plot we want to color the points in the scatter plot according to which country does the longitude estimate comes from. To achieve this use the `color` argument of the aesthetic mappings function `aes` and set it equal to the variable associated with country of origin (may need to look at `help(Langren1644)` again).

+ (5 points) With the third graph make it have the same updates of the second graph. To sqeeze in some more information, change the shape of the points according to the **source** of longitudinal measurement used. To do so mimic what you did in with the `color` parameter in `aes`, but this time do `aes(color = ..., shape = Source)`. Next, we will add a vertical line, indicating the true longitudinal distance between Toledo and Rome. To find this distance you can use Google, or `help(Langren1644)`. To add the vertical line we use  ` + geom_vline(aes(xintercept = _))` right after the `geom_point(...)`  where you should subtitude `_` with the longitudinal distance between Toledo and Rome. 


+ (10 points) With the fourth graph make it have the same updates of the third graph. Add title to this fourth plot describing the two main variables (be brief) and a subtitle with any additional variables plotted. Based on the new plot answer the following questions:

    - Who gave the most precise estimate? G. Jansonius
    - Which country gave the most accurate estimates? Flanders
    - Is the oldest estimate the worst? No
    - Which source seems more accurate? Map


***
***


# Problem 4

(23 points)

**Writing R Functions and Working with Vectors**: 

Read section 5 of Wasserman's R Intro document on Canvas about writing functions in R. Functions help us reuse code and enhance the reproduciblity of our code.

a. (2 points) Write an R function called `abssum` that takes four inputs -- `a`, `b`, `x`, and `y` and returns the quantity $ax + b|y|$.

```{r}
abssum <- function(a,b,x,y) {
  res = a * x + b * abs(y)
  return(res)
}
```


b. (2 points) Test your function and demonstrate that it works for at least three different combinations of the parameters.

```{r}
abssum(0,0,2,5)
abssum(2,4,1,-3)
abssum(-10,1,5,-2)
```

All tests passed

c. (2 points) Type `abssum(x = 1, y = 1)` into your code block. What happens when you only specify these two arguments? (Note: When knitting your document for submission, comment this line of code out, so that it does not produce an error.)

```{r}
# abssum(x=1, y=1)
```
  
An error has occured, because argument a and b are missing.

d. (2 points) Create a new function, `abssum2`, that has default values for `a = 1`, `b = 1`. Type `abssum2(x = 1, y = 1)` into your code block. What happens when you only specify the two arguments now?

```{r}
abssum2 <- function(a=1,b=1,x,y) {
  res = a * x + b * abs(y)
  return(res)
}

abssum2(x = 1, y = 1)
```
  
It worked, because a and b now have default values. They are treated as a=1 and b=1, when we only put x and y as inputs.

e. (2 points) Type `1:10` at the command line in `R`. What happens? 
  
We got ten consecutive integers from 1 to 10 printed out: [1]  1  2  3  4  5  6  7  8  9 10

f. (2 points) What happens when you call the function with the following input: `abssum2(x = 1:10, y = 1:10)`. Why does this happen?

```{r}
abssum2(x = 1:10, y = 1:10)
```

What happened is we get this result: [1]  2  4  6  8 10 12 14 16 18 20.  
This is because everytime when the function runs, it takes the next number in the consecutive integer list for x and did the same thing for y. So basically we are inputing "(x,y) pairs" as (1,1), (2,2), ... and so on.

g. (8 points) Use `help(rnorm)` to learn about the function `rnorm` which generates normal random variables. Generate 5000 independent standard normal random variables and assign them to `Z`. Repeat the same procedure and assign the new values to `W`. Type `plot(W, abssum2(x = Z, y = W), cex = .5, pch = 16, xlab = "W", ylab = "Z + |W|")`. Describe the graph that shows up, and explain why this happens. 

```{r}
Z <- rnorm(5000)
W <- rnorm(5000)
plot(W, abssum2(x = Z, y = W), cex = .5, pch = 16, xlab = "W", ylab = "Z + |W|")
```
  
The graph shows Z + |W| with respect to W, where both of them are independent standard normal random variables. The graph is upward-V-shaped. This is because we are adding the absolute value of W to Z. The further away from zero W is, the more it adds to Z, according to our function abssum2. 

h. (3 points) Use `ggplot2` to repeat the above plot. Don't worry whether the size of the points match the size of the points from part f. Optionally include titles and label the axis for this problem. (hint: assuming `W` and `Z` exist, you can create a data frame with `D <- data.frame(V1 = W, V2 = abssum2(x = Z, y = W))`; then use the knowledge from the commented code of Lab 01 and Homework 01, Problem 3 part e).

```{r}
D <- data.frame(V1 = W, V2 = abssum2(x = Z, y = W))

ggplot(data = D, aes(x = V1, y = V2)) +
  geom_point(aes(color = 1)) +
  labs(x = "W", 
       y = "Z + |W|")
```


***
***


# Problem 5

(5 points)

**Enroll in Piazza for 36-315**:

All questions about homeworks, labs, the lab exam, projects, course material, etc should be posted to the discussion board on Piazza. 

a. (1 points) If you're not already signed up, enrolled in our Piazza course [here](https://piazza.com/cmu/fall2018/36315). Alternatively, you can sign-up and view Piazza via the class Canvas. **IT IS CRITICAL THAT YOU ENROLL IN THE COURSE ON PIAZZA.** Important course discussion and information will only be distributed via Piazza. You are responsible for understanding all content that is posted to Piazza. 

Done.

b. (0 points) On the course Piazza page, in the top-right corner, click the Settings gear/wheel icon. Under Account & Email Settings, click Edit Email Notifications. I recommend choosing Real Time for both parts and checking the "Automatically follow every question and note" checkbox. 

c. (2 points) Write the following sentence: "I certify that I understand that I am responsible for reading and understanding all material and content posted on the course Piazza page."

I certify that I understand that I am responsible for reading and understanding all material and content posted on the course Piazza page.

d. (2 points) Write the following sentence: "I certify that I will not abuse the use of anonymous posting on the course Piazza page."

I certify that I will not abuse the use of anonymous posting on the course Piazza page.


***
***


# Problem 6

(5 points)

**Consent to Use Lab Solutions**:

If you do very well on a lab, we would like to post your solutions for that lab assignment to Canvas for other students to see. Posted solutions will, of course, be anonymized, so that other students will not know that the solutions are yours. We will not post homework or lab exam solutions to Canvas.

You are welcome to opt out of this if you want to. Just answer the following question: Do you consent to having your (anonymized) lab solutions posted to Canvas? (Just type "Yes", or "No".)

Yes.

(You will receive 5 points regardless of what you answer -- we just need to know ahead of time!)

